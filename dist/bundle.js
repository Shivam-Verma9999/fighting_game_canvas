(()=>{"use strict";var t,e={d:(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};e.d({},{JQ:()=>s}),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(t||(t={}));var i=function(){function e(t,e,i){void 0===e&&(e=1),this.lastKey="",this.initialJumps=2,this.jumpPower=-6,this.PlayerSpeed=1,this.velocity={x:0,y:1},this.weapon=null,this.id=t,this.x=i.x,this.y=i.y,this.height=i.height,this.width=i.width,this.color=i.color,this.totalJumpsAvailable=this.initialJumps,this.PlayerSpeed=e}return e.prototype.getDrawableCords=function(){return this},e.prototype.setWeapon=function(t){this.weapon=t},e.prototype.getMovementDirection=function(){return"a"===this.lastKey.toLowerCase()||"arrowleft"===this.lastKey.toLowerCase()?t.Left:t.Right},e.prototype.directionMultiplier=function(){return this.getMovementDirection()===t.Left?-1:1},e.prototype.getWeaponForDraw=function(){var t=this.weapon.isActive?this.weapon.width:this.weapon.height,e=this.weapon.isActive?this.weapon.height:this.weapon.width;return{color:this.weapon.color,x:this.x+this.width*this.directionMultiplier(),y:this.y,height:-t,width:e*this.directionMultiplier()}},e.prototype.updatePos=function(){this.velocity.y+=.2,this.x+this.width+this.velocity.x>=s.width&&(this.velocity.x=0),this.y+this.height+this.velocity.y>=s.height-35&&(this.velocity.y=0,this.totalJumpsAvailable=this.initialJumps),this.x+=this.velocity.x,this.y+=this.velocity.y},e.prototype.activateWeapon=function(){this.weapon.isActive=!0},e.prototype.deactivateWeapon=function(){this.weapon.isActive=!1},e.prototype.jump=function(){0!=this.totalJumpsAvailable&&(this.velocity.y=this.jumpPower,this.totalJumpsAvailable--)},e}(),o=function(t,e){void 0===t&&(t={x:0,y:0,height:30,width:5,color:"yellow"}),void 0===e&&(e=10),this.color=t.color,this.height=t.height,this.width=t.width,this.isActive=!1,this.damage=e,this.isActive=!0},a=new Image;a.src="./assets/images/mast_head.png";var n=new Image;n.src="./assets/images/game_level_background.webp";var s=new(function(){function t(t){this._height=t.height,this._width=t.width,this._id=t.id,this._backgroundColor=t.backgroundColor}return t.prototype.initialize=function(){if(console.log("Finding canvas with id: '".concat(this._id,"' ...")),this._canvasElement=document.getElementById(this._id),null===this._canvasElement)throw new Error("Cannot find canvas");if(this._canvasElement.height=this.height,this._canvasElement.width=this.width,console.log("Canvas found with id: '".concat(this._id,"'")),this._canvas=this._canvasElement.getContext("2d"),null===this._canvas)throw new Error("Unable to get 2d context");console.log("Context Ready...")},Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){console.log("setting height"),this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){console.log("setting height"),this._width=t},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this._canvas.drawImage(n,530,150,this.width,this.height,0,0,this.width,this.height)},t.prototype.draw=function(t){var e=this;t.forEach((function(t){t instanceof i&&(e.drawObject(t),e.drawObject(t.getWeaponForDraw()))}))},t.prototype.drawMastHead=function(){this._canvas.drawImage(a,0,0)},t.prototype.drawObject=function(t){this._canvas.fillStyle=t.color,this._canvas.fillRect(t.x,t.y,t.width,t.height)},t}())({id:"canvas",height:500,width:1e3,backgroundColor:"black"});s.initialize();var h=new i(1,3,{x:100,y:100,height:50,width:5,color:"red"}),r=new i(2,2,{x:400,y:100,height:50,width:5,color:"green"}),c={x:0,y:0,height:30,width:5,color:"white"};h.setWeapon(new o(c,10)),r.setWeapon(new o(c,10));var l=0,d=0;window.addEventListener("keydown",(function(t){switch(t.key){case"a":case"A":h.velocity.x=-h.PlayerSpeed,h.lastKey="a";break;case"d":case"D":h.velocity.x=h.PlayerSpeed,h.lastKey="d";break;case"w":if(0!=l)return;l++,h.jump();break;case" ":h.activateWeapon()}})),window.addEventListener("keydown",(function(t){switch(t.key){case"ArrowLeft":case"A":r.velocity.x=-r.PlayerSpeed,r.lastKey="ArrowLeft";break;case"ArrowRight":case"D":r.velocity.x=r.PlayerSpeed,r.lastKey="ArrowRight";break;case"ArrowUp":if(0!=d)return;d++,r.jump()}})),window.addEventListener("keyup",(function(t){if(console.log("'".concat(t.key,"' l:").concat(t.key.length)),"w"==t.key?l=0:" "===t.key&&h.deactivateWeapon(),h.lastKey.toLowerCase()===t.key.toString().toLowerCase())switch(t.key){case"a":case"A":case"d":case"D":h.velocity.x=0}})),window.addEventListener("keyup",(function(t){if("ArrowUp"==t.key&&(d=0),r.lastKey.toLowerCase()===t.key.toString().toLowerCase())switch(t.key){case"ArrowLeft":case"A":case"ArrowRight":case"D":r.velocity.x=0}})),function t(){window.requestAnimationFrame(t),s.clear(),s.drawMastHead(),s.draw([h,r]),h.updatePos(),r.updatePos()}()})();